<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.*?>

<StackPane fx:id="rootStack" xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml"
           fx:controller="wordageddon.controller.GameController" prefWidth="800.0" prefHeight="600.0"
           stylesheets="@style/GameView.css">

    <fx:define>
        <ToggleGroup fx:id="difficultyToggleGroup"/>
        <ToggleGroup fx:id="optionsToggleGroup"/>
    </fx:define>

    <!-- View 1: Selezione difficoltà -->
    <VBox fx:id="difficultyPane" alignment="CENTER" spacing="30" visible="true" fillWidth="true">
        <Label text="Seleziona la difficoltà" styleClass="game-title" />
        <HBox alignment="CENTER" spacing="20">
            <RadioButton text="Facile" toggleGroup="$difficultyToggleGroup" fx:id="easyRadio" styleClass="difficulty-radio"/>
            <RadioButton text="Medio" toggleGroup="$difficultyToggleGroup" fx:id="mediumRadio" styleClass="difficulty-radio"/>
            <RadioButton text="Difficile" toggleGroup="$difficultyToggleGroup" fx:id="hardRadio" styleClass="difficulty-radio"/>
        </HBox>
        <HBox alignment="CENTER" spacing="20">
            <Button text="Avvia Gioco" onAction="#onStartGame" prefWidth="150" prefHeight="40"/>
            <Button text="Torna al Menù" onAction="#onBackToMenu" prefWidth="150" prefHeight="40"/>
        </HBox>
        <VBox.margin>
            <Insets left="50.0" right="50.0"/>
        </VBox.margin>
    </VBox>

    <!-- View 2: Gameplay -->
    <BorderPane fx:id="gameplayPane" visible="false" prefWidth="800.0" prefHeight="600.0">
        <top>
            <VBox alignment="CENTER" spacing="10">
                <Label fx:id="timerLabel" text="00:00" alignment="CENTER" styleClass="timer-label"/>
                <Label text="Leggi attentamente i documenti - Inizieranno le domande a breve!" styleClass="info-label"/>
                <BorderPane.margin>
                    <Insets top="20.0" bottom="10.0"/>
                </BorderPane.margin>
            </VBox>
        </top>
        <center>
            <HBox fx:id="documentsContainer" spacing="15" alignment="CENTER" fillHeight="true">
                <TextArea fx:id="doc1" editable="false" prefWidth="250" prefHeight="400" wrapText="true" visible="false"/>
                <TextArea fx:id="doc2" editable="false" prefWidth="250" prefHeight="400" wrapText="true" visible="false"/>
                <TextArea fx:id="doc3" editable="false" prefWidth="250" prefHeight="400" wrapText="true" visible="false"/>
                <HBox.margin>
                    <Insets left="10.0" right="10.0"/>
                </HBox.margin>
            </HBox>
        </center>
        <bottom>
            <VBox alignment="CENTER" spacing="10">
                <Button fx:id="readyButton" text="Sono Pronto!" onAction="#onReady" prefWidth="150" prefHeight="40" 
                        styleClass="ready-button" visible="false"/>
                <Button text="Torna al Menù" onAction="#onBackToMenu" alignment="CENTER" prefWidth="150">
                </Button>
                <BorderPane.margin>
                    <Insets top="10.0" bottom="20.0"/>
                </BorderPane.margin>
            </VBox>
        </bottom>
    </BorderPane>

    <!-- View 3: Domande -->
    <VBox fx:id="questionPane" alignment="CENTER" spacing="30" visible="false" fillWidth="true">
        <VBox alignment="CENTER" spacing="10">
            <Label fx:id="questionNumberLabel" text="Domanda 1 di 5" styleClass="question-number-label"/>
            <Label fx:id="questionLabel" text="Domanda qui" wrapText="true" styleClass="question-label" maxWidth="600"/>
        </VBox>
        
        <VBox spacing="15" maxWidth="500">
            <RadioButton fx:id="option1" text="Opzione 1" toggleGroup="$optionsToggleGroup" styleClass="radio-button" wrapText="true"/>
            <RadioButton fx:id="option2" text="Opzione 2" toggleGroup="$optionsToggleGroup" styleClass="radio-button" wrapText="true"/>
            <RadioButton fx:id="option3" text="Opzione 3" toggleGroup="$optionsToggleGroup" styleClass="radio-button" wrapText="true"/>
            <RadioButton fx:id="option4" text="Opzione 4" toggleGroup="$optionsToggleGroup" styleClass="radio-button" wrapText="true"/>
        </VBox>
        
        <HBox alignment="CENTER" spacing="20">
            <Button text="Conferma Risposta" onAction="#onSubmitAnswer" prefWidth="150" prefHeight="40"/>
            <Button text="Torna al Menù" onAction="#onBackToMenu" prefWidth="150" prefHeight="40"/>
        </HBox>
        <VBox.margin>
            <Insets left="50.0" right="50.0"/>
        </VBox.margin>
    </VBox>

    <!-- View 4: Risultati -->
    <VBox fx:id="resultsPane" alignment="CENTER" spacing="25" visible="false" fillWidth="true">
        <!-- Titolo principale -->
        <Label text="Partita Terminata!" styleClass="results-title"/>
        
        <!-- Sezione punteggio principale -->
        <VBox alignment="CENTER" spacing="15" styleClass="score-section">
            <Label fx:id="scoreLabel" text="Punteggio: 80%" styleClass="score-label"/>
            <Label fx:id="finalMessageLabel" text="Ottimo lavoro!" styleClass="final-message-label"/>
            <Label fx:id="detailedScoreLabel" text="Risposte corrette: 4 su 5" styleClass="detailed-score-label"/>
        </VBox>
        
        <!-- Sezione revisione domande -->
        <VBox alignment="CENTER" spacing="20" fillWidth="true" maxWidth="900">
            <!-- Intestazione sezione -->
            <Label text="Revisione delle Domande:" styleClass="results-section-title"/>
            
            <!-- Tabella delle domande -->
            <TableView fx:id="questionReviewTable" visible="true" prefHeight="350" maxHeight="350" 
                       styleClass="question-review-table">
                <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
                <columns>
                    <TableColumn fx:id="questionNumberColumn" text="N°" prefWidth="50" minWidth="40" maxWidth="60"/>
                    <TableColumn fx:id="questionTextColumn" text="Domanda" prefWidth="300" minWidth="200"/>
                    <TableColumn fx:id="userAnswerColumn" text="Tua Risposta" prefWidth="150" minWidth="120"/>
                    <TableColumn fx:id="correctAnswerColumn" text="Risposta Corretta" prefWidth="150" minWidth="120"/>
                    <TableColumn fx:id="scoreColumn" text="Punteggio" prefWidth="80" minWidth="70" maxWidth="100"/>
                </columns>
                <VBox.margin>
                    <Insets top="10" right="20" bottom="10" left="20"/>
                </VBox.margin>
            </TableView>
        </VBox>
        
        <!-- Pulsanti di navigazione -->
        <HBox alignment="CENTER" spacing="25" styleClass="navigation-buttons">
            <Button text="Nuova Partita" onAction="#onNewGame" prefWidth="160" prefHeight="45" styleClass="new-game-button"/>
            <Button text="Torna al Menù" onAction="#onBackToMenu" prefWidth="160" prefHeight="45" styleClass="menu-button"/>
        </HBox>
        
        <VBox.margin>
            <Insets top="20" right="30" bottom="20" left="30"/>
        </VBox.margin>
    </VBox>

</StackPane>